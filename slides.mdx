export { dark as theme } from 'mdx-deck/themes'
import { Notes } from 'mdx-deck'
import { CodeSurfer } from "mdx-deck-code-surfer"
import vsDark from "prism-react-renderer/themes/vsDark"

## 7 Deadly Sins of React 
⚛ 🔥 😈 🔥 ⚛

---

<CodeSurfer
  title="$ whoami"
  code={require("!raw-loader!./Examples/AboutMe.js").default}
  showNumbers={true}
  theme={vsDark}
  dark={false}
  steps={[
    { range:[1, 8]},
    { lines: [2]},
    { lines: [5]},
    { lines: [6] },
    { lines: [7] },
    { lines: [3],},
  ]}
/>

---

## Sin #1: Tightly Coupled Components

---


<CodeSurfer
  title="Tightly Coupled Components"
  code={require("!raw-loader!./Examples/TightlyCoupled.js").default}
  showNumbers={true}
  theme={vsDark}
  dark={false}
  steps={[
    { notes: "components should be reusable"},
    { lines: [1], notes: "what is the formApi 🤔" },
    { range: [8, 13], notes: "what is the formApi 🤔" },
  ]}
/>

---

<CodeSurfer
  title="Tightly Coupled Components"
  code={require("!raw-loader!./Examples/TightlyCoupledParent.js").default}
  showNumbers={true}
  theme={vsDark}
  dark={false}
  steps={[
    { notes: "let's take a look at where it is used..."},
    { lines: [6], notes: "...so FormApi is a render prop!" },
  ]}
/>

---

<CodeSurfer
  title="Tightly Coupled Components"
  code={require("!raw-loader!./Examples/TightlyCoupledGetsBetter.js").default}
  showNumbers={true}
  theme={vsDark}
  dark={false}
  steps={[
    { notes: "it gets better, what if?"},
    { lines: [2,3,4] },
    { lines: [13, 14] },
  ]}
/>

---

## Why is that bad?

### hard to reuse this component somewhere else
### changes to FormApi will have an impact unlikely to be caught at unit test level

---

# Sin #2: Prop Gluttony

---

<CodeSurfer
  title="Prop Gluttony"
  code={require("!raw-loader!./Examples/PropGluttony1.js").default}
  showNumbers={true}
  theme={vsDark}
  dark={false}
  steps={[
    { notes: "sometimes it is tempting to introduce a new prop..."},
    { lines: [2,3,4], notes: "...mkay" },
    { lines: [8, 11, 12], notes: "... hold on a second" },
  ]}
/>

---

<CodeSurfer
  title="Prop Gluttony"
  code={require("!raw-loader!./Examples/PropGluttony2.js").default}
  showNumbers={true}
  theme={vsDark}
  dark={false}
  steps={[
    { lines: [12], notes: "you can simply derive current step, right?" },
    { lines: [4, 27], notes: "that means we can drop this prop" },
  ]}
/>

---

## pay attention to existing props!
## what can be derived, should be derived!

---

# Sin #3: State Greedy

---

<CodeSurfer
  title="State Greedy"
  code={require("!raw-loader!./Examples/LiftStateUp.js").default}
  showNumbers={true}
  theme={vsDark}
  dark={false}
  steps={[
    { notes: "state should be high up, in the heavens ☁️" },
    { range: [6, 15] },
    { range: [19, 27], notes: "getDerivedStateFromProps..." },
    { range: [29, 33], notes: "setting its state and also notifying the parent about it?" },
  ]}
/>

---

<div style={{height: 'auto'}}>
  <h2>After sacrificing state to the Gods higher up...</h2>
  <img style={ {objectFit: "cover", height: "70vh"}} src={'./images/refactor.png'}></img>
</div>

---

# Sin #4: Visibility Prop

---

<CodeSurfer
  title="Visibility Props"
  code={require("!raw-loader!./Examples/VisibilityProp.js").default}
  showNumbers={true}
  theme={vsDark}
  dark={false}
  steps={[
    { notes: "just a Modal right?" },
    { range: [2, 14], notes: 'things a Modal do' },
    { range: [23, 41], notes: 'things a Modal do' },
    { range: [16, 26], notes: "render method 🔎" },
    { range: [17, 21], notes: "visibility prop 👁️" },
  ]}
/>

---

## Why is that bad?

Although you return `null` from `render()`, this component will still get *mounted* causing memory usage.

Instead, simply pull render behaviour into parent!

---

<CodeSurfer
  title="Conditional renders to the rescue"
  code={require("!raw-loader!./Examples/VisibilityProps2.js").default}
  showNumbers={true}
  theme={vsDark}
  dark={false}
  steps={[
    { notes: "No memory impact ❌🤖" }
  ]}
/>

---

# Sin #5: Inconsistent Naming

---

<CodeSurfer
  title="Disparity between imported symbols and filesystem"
  code={require("!raw-loader!./Examples/LocationModuleNameDisparity.js").default}
  showNumbers={true}
  theme={vsDark}
  dark={false}
  steps={[
    { notes: 'Unnecessary mental heap usage. 🧠' },
    { lines: [2, 8], notes: "Please dont do this. 🙏" }
  ]}
/>

---

<div style={{height: 'auto'}}>
  <h3>here is a complimentary photo of Dan Abramov</h3>
  <img style={ {objectFit: "cover", height: "70vh"}} src={'./images/dan.jpg'}></img>
</div>

---

### Now that we have talked about React Trinity

1. The State
2. The Props
3. Dan Abramov

a few last words on testing...

---

<div style={{height: 'auto'}}>
  <img style={ {objectFit: "cover", height: "70vh"}} src={'./images/confession.png'}></img>
</div>

---

I used to be a non-believer...

---

in *snapshot testing.*

---

1 - it is not TDD at all...

2 - feels like cheating...

---

3 - Should we trust people to *actually read into differences* rather than just hitting update snapshots?

---

<CodeSurfer
  title="Sin #6: Overzealous Snapshots"
  code={require("!raw-loader!./Examples/GranularSnapshots.js").default}
  showNumbers={true}
  theme={vsDark}
  dark={false}
  steps={[
    { notes: 'snapshots are an easy way to increase test coverage!' },
    { lines: [12, 13], notes: "my job here is done." }
  ]}
/>

---

<CodeSurfer
  title="Sin #6: Overzealous Snapshots"
  code={require("!raw-loader!./Examples/Snapshots.js").default}
  showNumbers={true}
  theme={vsDark}
  dark={false}
  steps={[
    { notes: 'Good job! Snapshot for that test case alone is 60 lines long!' },
  ]}
/>

---

# Sin #6: Overzealous Snapshots

---

<div style={{height: 'auto'}}>
  <img style={ {objectFit: "cover", height: "70vh"}} src={'./images/epiphany.jpg'}></img>
</div>

---

<CodeSurfer
  code={require("!raw-loader!./Examples/GranularSnapshots.1.js").default}
  showNumbers={true}
  theme={vsDark}
  dark={false}
  steps={[
    { notes: 'you wont believe this one simple trick to reduce snapshot size by 90%' },
    { lines: [13], notes: "be specific!" }
  ]}
/>

---

<CodeSurfer
  title="Granular Snapshots 🔬"
  code={require("!raw-loader!./Examples/Snapshots.js").default}
  showNumbers={true}
  theme={vsDark}
  dark={false}
  steps={[
    { range: [8, 19], notes: 'all we needed to test was this...' },
  ]}
/>

---

snapshot testing can be a force for good...

...when used *granularly* and *sparingly!*

---

# Sin #7: Intimacy with Enzyme

---

<CodeSurfer
  title="Black Box Testing"
  code={require("!raw-loader!./Examples/BlackBoxTesting.js").default}
  showNumbers={true}
  theme={vsDark}
  dark={false}
  steps={[
    { notes: 'avoid setting or asserting against state in your tests directly!' },
    { lines: [3, 9], notes: "test cases know the internal workings of the unit under test" }
  ]}
/>

---

<div style={{height: 'auto'}}>
  <img style={ {objectFit: "cover", height: "70vh"}} src={'./images/kent_c_quote.png'}></img>
</div>

---

<CodeSurfer
  title="Black Box Testing"
  code={require("!raw-loader!./Examples/BlackBoxTesting.1.js").default}
  showNumbers={true}
  theme={vsDark}
  dark={false}
  steps={[
    { notes: 'tests should be conducted in a "black box"' },
    { lines: [3, 9], notes: "refactoring the inner workings of the component should not make my tests fail!" }
  ]}
/>

---

# Summary

1. Tightly Coupled Components
2. Prop Gluttony
3. State Greedy Components

---

4. Visibility Props
5. Inconsistent Naming
6. Overzealous Snapshots
7. Intimacy with Enzyme

---

# That's all. Thank you.
